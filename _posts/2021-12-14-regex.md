---
title: "자바 정규 표현식"
excerpt: "Pattern과 Matcher"

categories:
  - Java
tags:
  - [Java]

toc: true
toc_sticky: true

date: 2021-12-14
last_modified_at: 2021-12-14
---

코딩 테스트에서 문자열 입력규칙 준수 여부를 체크하는 문제들을 종종 접하면서 정규 표현식의 필요성을 느꼈습니다. 알아두면 실제 개발에서도 활용성이 높을 것으로 보여 이번 기회에 자바에서 정규 표현식을 사용하는 방법을 정리해봤습니다.

정규 표현식(Regular Expression)은 특정 규칙을 가진 문자열의 집합을 표현하기 위해 쓰이는 **형식언어**입니다. 전화번호, 아이디, 이메일과 같이 정해진 형식대로 입력을 강제해야하는 경우 문자열의 유효성을 판단할 때 정규표현식을 사용하면 쉽게 구현할 수 있습니다. 정규표현식을 사용하려면 우선 정규표현식 문법에 대해 알아야 합니다.

## 메타문자 정리

메타문자는 정규표현식에서 특별한 의미를 갖는 문자들입니다. 예를 들어 \d는 글자그대로 해석되지 않고 0에서 9 사이의 숫자를 의미하는 메타문자입니다.

### 1. 매칭될 문자를 지정하거나 제외하기

|    정규식    |                          설명                           |
| :----------: | :-----------------------------------------------------: |
|    [abc]     |                      a,b,c중 하나                       |
|    [^abc]    |                a,b,c를 제외한 다른 글자                 |
|   [a-zA-Z]   |            알파벳 소문자 혹은 대문자 중 하나            |
| [a-d\[m-p]]  | a에서 d까지 또는 m부터 p까지 중에 하나와 일치: [a-dm-p] |
| [a-z&&[def]] |                d, e, f 중의 하나와 일치                 |

|{}|횟수 또는 범위를 나타냅니다.|
|()|소괄호 안의 문자를 하나의 문자로 인식|
|\||패턴안에서 or 연산 수행|
|\\|정규표현식 역슬래시(\\)는 확장문자(역슬래시 다음에 일반문자가 오면 특수문자로 취급하고 역슬래시 다음에 특수문자가 오면 그 문자 자체를 의미|

|\s|공백문자|
|\S|공백문자가 아닌 나머지 문자|
|\w|알파벳이나 숫자|
|\W|알파벳이나 숫자를 제외한 문자|
|\d|숫자|
|\D|숫자를 제외한 모든 문자|
|(?i)|앞부분에 (?!)라는 옵션을 넣어주게 되면 대소문자를 구분하지 않음|

### 2. 미리 정의된 문자를 지정하기

| 정규식 |                              설명                               |
| :----: | :-------------------------------------------------------------: |
|   .    | 임의의 문자 하나(라인 종결자와 일치할 수도 하지 않을 수도 있음) |
|   \d   |                              숫자                               |
|   \D   |                     숫자를 제외한 모든 문자                     |
|   \s   |                            공백문자                             |
|   \S   |                   공백문자가 아닌 나머지 문자                   |
|   \w   |                         알파벳이나 숫자                         |
|   \W   |                  알파벳이나 숫자를 제외한 문자                  |

### 3. 수량 매칭

| 정규식 |        설명         |
| :----: | :-----------------: |
|  X\*   |    X가 0개 이상     |
|   X+   |    X가 1개 이상     |
|   X?   |    X가 0또는 1개    |
|  X{n}  |       X가 n개       |
| X{n,}  |    X가 n번 이상     |
| X{n,m} | X가 n번이상 m번이하 |

### 4. 경계조건 판별 조건

| 정규식 |                설명                |
| :----: | :--------------------------------: |
|   ^    |             행의 시작              |
|   $    |              행의 끝               |
|   \b   |            단어의 경계             |
|   \B   |     단어가 아닌 것에 대한 경계     |
|   \A   |          입력의 시작부분           |
|   \G   |           이전 매치의 끝           |
|   \Z   | 입력의 끝이지만 종결자가 있는 경우 |
|   \z   |             입력의 끝              |

### 5. 패턴 매칭에서 플래그 사용

|          플래그          | 동등 내장 표현 |                                                       설명                                                       |
| :----------------------: | :------------: | :--------------------------------------------------------------------------------------------------------------: |
| Pattern.CASE_INSENSITIVE |      (?i)      |                                          대소문자를 구분하지 않습니다.                                           |
|     Pattern.COMMENTS     |      (?x)      |                           공백과 주석이 무시됩니다. 주석은 #부터 그 행 끝까지 입니다.                            |
|    Pattern.MULTILINE     |      (?m)      |      다중행 모드를 사용여 모든 ^와 $가 인식됩니다. 기본값은 입력값 전체를 하나의 시작과 끝으로 인식합니다.       |
|      Pattern.DOTALL      |      (?s)      |                                .가 개행문자 까지 포함하는 모든 문자로 매칭됩니다.                                |
|     Pattern.LITERAL      |      None      | 력의 메타문자와 이스케이프된 문자를 일반 문자로 취급합니다. CASE_INSENSITIVE와 UNICODE_CASE는 기능이 유지됩니다. |

## 자바 정규표현식의 활용방법

정규 표현식을 작성하는 방법은 자바 API java.util.regex 패키지를 사용해야 합니다. 자바에서 정규표현식을 사용할때에는 java.util.regex 패키지 안에 있는 Pattern클래스와 Matcher클래스를 주로 사용합니다.

## Pattern 클래스

정규식을 Pattern 객체로 미리 컴파일을 하여 사용하기 때문에 처리 속도가 더 빠르고 매칭된 데이터를 더 상세히 조작할 수 있습니다.

- 정규식의 컴파일된 표현입니다.
- 공개된 생성자를 제공하지 않습니다.
- 따라서 정적 compile메소드를 호출하여 패턴 객체를 생성합니다. 이 메소드는 첫번째 인자로 정규식 문자열을 받아들입니다.

```java
Pattern pattern = Pattern.compile("\\bcat\\b");
```

### Pattern 클래스 주요 메서드

- compile(String regex) : 주어진 정규표현식으로부터 패턴을 만듭니다.
- matches(CharSequence input) : 대상 문자열이 패턴과 일치할 경우 true를 반환합니다.
- asPredicate() : 문자열을 일치시키는 데 사용할 수있는 술어를 작성합니다.
- pattern() : 컴파일된 정규표현식을 String 형태로 반환합니다.
- split(CharSequence input) : 문자열을 주어진 인자값 CharSequence 패턴에 따라 분리합니다.

## Matcher 클래스

패턴을 해석하고 입력 문자열에 대해 일치작업을 수행하는 엔진입니다.
생성자를 제공하지 않습니다. Pattern 객체의 matcher 메소드를 호출해서 얻습니다.

```java
Pattern pattern = Pattern.compile("\\bcat\\b");
Matcher matcher = pattern.matcher("cat cat cat cattie cat");
```

```java
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RegexExample {
	public static void main(String[] args)  {
            Pattern pattern = Pattern.compile("^[a-zA-Z]*$"); //영문자만
            String val = "abcdef"; //대상문자열

            Matcher matcher = pattern.matcher(val);
            System.out.println(matcher.find());
	}
}
```

### Matcher 클래스 주요 메서드

- matches() : 대상 문자열과 패턴이 일치할 경우 true 반환합니다.
- find() : 대상 문자열과 패턴이 일치하는 경우 true를 반환하고, 그 위치로 이동합니다.
- find(int start) : start위치 이후부터 매칭검색을 수행합니다.
- start() : 매칭되는 문자열 시작위치 반환합니다.
- start(int group) : 지정된 그룹이 매칭되는 시작위치 반환합니다.
- end() : 매칭되는 문자열 끝 다음 문자위치 반환합니다.
- end(int group) : 지정되 그룹이 매칭되는 끝 다음 문자위치 반환합니다.
- group() : 매칭된 부분을 반환합니다.
- group(int group) : 매칭된 부분중 group번 그룹핑 매칭부분 반환합니다.
- groupCount() : 패턴내 그룹핑한(괄호지정) 전체 갯수를 반환합니다.

## 자바 문자열 객체에서 정규식의 활용

문자열 객체의 메소드중 String regex를 파라미터로 받는 메소드들은 모두 정규식을 사용합니다.

- boolean matches(String regex)
  - 인자로 주어진 정규식에 매칭되는 값이 있는지 확인합니다.
- String replaceAll(String regex, String replacement)
  - 문자열내에 있는 정규식과 매칭되는 모든 문자열을 replacement문자열로 교체한 문자열을 반환합니다.
- String[] split(String regex)
  - 인자로 주어진 정규식과 매칭되는 문자열을 구분자로 사용하여 문자열을 나눕니다.
